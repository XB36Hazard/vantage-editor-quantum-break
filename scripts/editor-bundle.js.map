{"version":3,"sources":["src/editor.ts","src/environment.ts","src/main.ts","src/save.ts"],"names":[],"mappings":"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","file":"editor-bundle.js","sourcesContent":["import { SaveEditor, Stream, crc32 } from 'libvantage';\nimport { Quantum_Break_Save } from './save';\nimport { observable } from 'aurelia-framework';\nexport class Editor implements SaveEditor {\n    private QBS: Quantum_Break_Save = null; private Current_Timeline_Image_URL: string = 'src\\\\images\\\\1.png'; private Current_Timeline_2 = 1; @observable private Current_Timeline = 1; \n    private Current_TimelineChanged(newValue, oldValue) { if(newValue !== oldValue) { this.Update(); } }\n    public load(buffer: Buffer) { this.QBS = new Quantum_Break_Save(new Stream(buffer)); if(this.QBS.IsValid) { this.Current_Timeline = this.QBS.Time_Line; this.Update(); } }\n    public Update() { if(this.Current_Timeline_2 !== this.Current_Timeline) { if(this.QBS !== null) { if(this.QBS.IsValid) { this.QBS.Time_Line = this.Current_Timeline; this.Current_Timeline_2 = this.Current_Timeline; this.Current_Timeline_Image_URL = \"src\\\\images\\\\\" + this.Current_Timeline + \".png\"; } } } }\n    public save(): Buffer  { if(this.QBS !== null) { if(this.QBS.IsValid) { return this.QBS.toBuffer(); } } }\n}","export default {\n  debug: false,\n  testing: false\n};\n","import { Aurelia } from 'aurelia-framework';\nimport { setEditor } from 'libvantage';\n\nexport async function configure(aurelia: Aurelia): Promise<void> {\n    aurelia.use.basicConfiguration().plugin('libvantage');\n    await aurelia.start();\n    await aurelia.setRoot('editor');\n    setEditor(aurelia['root'].viewModel);\n}","import { Stream, crc32 } from 'libvantage';\r\nconst Acts = ['act1_part1', 'act1_part2', 'act1_part3', 'act1junction', 'act2_part1', 'act2_part2', 'act2_part3', 'act2junction', 'act3_part1', 'act3_part2', 'act3junction', 'act3_part3', 'act4_part1_pool', 'act5_part2', 'act5_part2b', 'act4junction', 'act6_part1', 'act6_part2', 'act6_part3'];\r\nexport class Quantum_Break_Save {\r\n    public Time_Line = -1;\r\n    public IsValid = false;\r\n    constructor(io: Stream) {\r\n        if (io.readUInt32() !== (io.length - 4)) {\r\n            this.show_message('Error: Invalid Data Length!'); throw new Error('Invalid Data Length!'); \r\n        }\r\n        else {\r\n            io.position = 0xC;\r\n            const Hash_1 = io.readUInt32();\r\n            const Hash_2 = crc32(io.readBytes(io.length - 0x10), 0, io.length - 0x10);\r\n            if (Hash_1 !== Hash_2) { \r\n                this.show_message('Error: Invalid Hash!'); throw new Error('Invalid Hash!'); \r\n            }\r\n            else {\r\n                io.position = 0x10;\r\n                io.readString('ascii',io.readUInt32());\r\n                const TimeID: String = io.readString('ascii', io.readUInt32());\r\n                for(let i = 0; i < Acts.length; i++) {\r\n                    if(Acts[i] == TimeID) {\r\n                        this.Time_Line = i + 1;\r\n                        break;\r\n                    }\r\n                }\r\n                if(this.Time_Line > 0) { if(this.Time_Line < 20) { this.IsValid = true; } }\r\n                if(!this.IsValid) { this.show_message('Invalid Data!'); throw new Error('Invalid Data!');  }\r\n            }\r\n        }\r\n    }\r\n    private write_loop(io:Stream, count:number, value:number) { for(let x = 0; x < count; x++) { io.writeUInt32(value); } }\r\n    public show_message(message:string) { alert(message); }\r\n    public toBuffer(): Buffer {\r\n        const Data_Length:number = 0xE7 + (Acts[this.Time_Line - 1].length * 2);\r\n        const io = Stream.reserve(Data_Length);\r\n        io.writeUInt32(Data_Length - 4);\r\n        io.writeUInt32(0x7E);\r\n        io.writeUInt32(0x7E);\r\n        io.writeUInt32(0x0);\r\n        for (let x = 0; x < 2; x++) {\r\n            io.writeUInt32(0x9);\r\n            io.writeString('gameworld');\r\n            io.writeUInt32(Acts[this.Time_Line - 1].length); \r\n            io.writeString(Acts[this.Time_Line - 1]);\r\n            if(x == 0) { io.writeByte(1); }\r\n        }\r\n        io.writeUInt32(0x0);\r\n        io.writeUInt32(0x1);\r\n        io.writeUInt32(0x20001);\r\n        io.writeUInt32(0x50000);\r\n        this.write_loop(io, 4, 0);\r\n        this.write_loop(io, 2, 0x3F8000);\r\n        this.write_loop(io, 2, 0);\r\n        this.write_loop(io, 2, 0x3F8000);\r\n        this.write_loop(io, 3, 0);\r\n        this.write_loop(io, 2, 0x3F8000);\r\n        this.write_loop(io, 2, 0);\r\n        this.write_loop(io, 2, 0x3F8000);\r\n        this.write_loop(io, 3, 0);\r\n        io.writeUInt32(0x2000000);\r\n        this.write_loop(io, 3, 0);\r\n        io.writeUInt32(0xBF800000);\r\n        this.write_loop(io, 2, 0);\r\n        io.writeUInt32(0xFF0000);\r\n        io.writeUInt32(0xFF000000);\r\n        io.writeUInt32(0xFFFFFFFF);\r\n        io.writeUInt32(0xFF);\r\n        io.writeUInt32(0xFFFFFFFF);\r\n        io.writeUInt32(0xFFFF);\r\n        io.writeUInt32(0xFFFFFF00);\r\n        io.writeUInt32(0xFFFFFF);\r\n        this.write_loop(io, 4, 0);\r\n        io.position = 0x10;\r\n        const Hash = crc32(io.readBytes(Data_Length - 0x10));\r\n        io.position = 0xC;\r\n        io.writeUInt32(Hash);\r\n        return io.getBuffer();\r\n    }\r\n}"],"sourceRoot":".."}